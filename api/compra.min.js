const express=require("express"),mongoose=require("mongoose"),{purchaseModel:purchaseModel}=require("../includes/models.js"),jwt=require("jsonwebtoken");var compra=express.Router();function verifyToken(req,res,next){const bearerHeader=req.headers.authorization;if(void 0!==bearerHeader){const bearerToken=bearerHeader.split(" ")[1];req.token=bearerToken,next()}else res.sendStatus(403)}compra.use(express.json()),mongoose.connect("mongodb://127.0.0.1:27017/proyecto1_9490-18-3141"),compra.get("/",verifyToken,(function(req,res){jwt.verify(req.token,"secretkey",(error,authData)=>{error?res.sendStatus(403):res.json({message:"purchase"})})})),module.exports=compra;