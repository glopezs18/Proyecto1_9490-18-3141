const express=require("express"),mongoose=require("mongoose"),{usersModel:usersModel}=require("../includes/models.js"),jwt=require("jsonwebtoken");var registro=express.Router();registro.use(express.json()),mongoose.connect("mongodb://127.0.0.1:27017/proyecto1_9490-18-3141"),registro.get("/",(req,res)=>{res.json({message:"Registro de usuarios - Proyecto 1"})}),registro.post("/:dpi",(function(req,res){const user={nombres:req.body.nombres,apellidos:req.body.apellidos,dpi:req.params.dpi,fechaNacimiento:req.body.fechaNacimiento,clave:req.body.clave,validacionClave:req.body.validacionClave,nit:req.body.nit,numeroTelefonico:req.body.numeroTelefonico,correoElectronico:req.body.correoElectronico};usersModel.exists({correoElectronico:user.correoElectronico}).then((function(data){data?res.json({data:data,message:"Ya existe un usuario con este correo."}):usersModel.create(user).then(res.json({message:"Usuario registrado con Ã©xito."})).catch(err=>res.json(err))})).catch((function(err){console.log(err)}))})),module.exports=registro;